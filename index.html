<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Odin Sight</title>
    <style>
        :root {
            --primary: #4a9bd7;
            --secondary: #5bc0de;
            --dark: #0a1622;
            --light: #ecf0f1;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #1abc9c;
            --text-light: #ffffff;
            --text-muted: #a0a0a0;
            --accent: #5bc0de;
        }
        
        /* Login Screen Styles */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--dark);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            background-image: linear-gradient(rgba(10, 22, 34, 0.9), rgba(10, 22, 34, 0.95)), url('https://i.imgur.com/QSSR5V8.png');
            background-size: cover;
            background-position: center;
        }
        
        .login-container {
            background-color: rgba(10, 22, 34, 0.8);
            border: 1px solid rgba(74, 155, 215, 0.3);
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
            width: 90%;
            max-width: 450px;
            padding: 30px;
            text-align: center;
            color: var(--text-light);
            margin: 0 auto;
        }
        
        .login-header {
            margin-bottom: 30px;
        }
        
        .login-logo {
            max-width: 320px;
            margin-bottom: 15px;
        }
        
        .login-header h2 {
            color: var(--text-light);
            margin-bottom: 10px;
            font-size: 24px;
        }
        
        .login-header p {
            color: var(--text-muted);
            font-size: 16px;
        }
        
        .login-form .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .login-form label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-light);
        }
        
        .login-form input {
            width: 100%;
            padding: 12px;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(74, 155, 215, 0.3);
            border-radius: 4px;
            font-size: 16px;
            transition: all 0.3s;
            color: var(--text-light);
        }
        
        .login-form input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(74, 155, 215, 0.5);
            background-color: rgba(255, 255, 255, 0.15);
        }
        
        .login-btn {
            background-color: rgba(74, 155, 215, 0.2);
            color: var(--text-light);
            border: 1px solid var(--primary);
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            width: 100%;
            margin-top: 10px;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .login-btn:hover {
            background-color: var(--primary);
            box-shadow: 0 0 15px rgba(74, 155, 215, 0.5);
        }
        
        .login-error {
            color: var(--danger);
            font-size: 14px;
            margin-bottom: 15px;
            min-height: 20px;
        }
        
        /* Tab styles for login/register */
        .login-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(74, 155, 215, 0.3);
        }
        
        .login-tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            color: var(--text-muted);
            transition: all 0.3s;
        }
        
        .login-tab.active {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
        }
        
        .login-tab:hover:not(.active) {
            color: var(--text-light);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background-color: var(--dark);
            color: var(--text-light);
            line-height: 1.6;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            width: 100%;
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%;
        }
        
        /* Main Content Styles */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background-color: var(--dark);
            padding: 20px 0;
            border-bottom: 1px solid rgba(74, 155, 215, 0.3);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .welcome-message {
            max-width: 800px;
        }
        
        .welcome-message h1 {
            font-size: 28px;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .welcome-message h2 {
            font-size: 20px;
            margin-bottom: 15px;
            color: var(--text-light);
            font-weight: 400;
        }
        
        .welcome-message p {
            font-size: 16px;
            color: var(--text-muted);
            line-height: 1.6;
        }
        
        .user-controls {
            display: flex;
            align-items: center;
        }
        
        .user-info {
            margin-right: 20px;
            display: flex;
            align-items: center;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 10px;
            font-weight: bold;
            font-size: 18px;
        }
        
        .logout-btn {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--text-light);
            border: 1px solid var(--danger);
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .logout-btn:hover {
            background-color: var(--danger);
        }
        
        /* Assessment Form Styles */
        .assessment-container {
            padding: 30px 0;
        }
        
        .card {
            background-color: rgba(10, 22, 34, 0.6);
            border: 1px solid rgba(74, 155, 215, 0.3);
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .card-header {
            border-bottom: 1px solid rgba(74, 155, 215, 0.3);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        
        .card-header h2 {
            color: var(--primary);
            font-size: 22px;
        }
        
        .form-section {
            margin-bottom: 30px;
        }
        
        .form-section-title {
            color: var(--text-light);
            font-size: 18px;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(74, 155, 215, 0.3);
        }
        
        .form-row {
            display: flex;
            margin: 0 -10px;
            flex-wrap: wrap;
        }
        
        .form-col {
            flex: 1;
            padding: 0 10px;
            min-width: 250px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-light);
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(74, 155, 215, 0.3);
            border-radius: 4px;
            font-size: 16px;
            color: var(--text-light);
            transition: all 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(74, 155, 215, 0.5);
            background-color: rgba(255, 255, 255, 0.15);
        }
        
        select.form-control {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%234a9bd7' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 20px;
            padding-right: 40px;
        }

        /* Fix for dropdown text color */
        select.form-control option {
            background-color: var(--dark);
            color: var(--text-light);
        }
        
        .btn {
            background-color: rgba(74, 155, 215, 0.2);
            color: var(--text-light);
            border: 1px solid var(--primary);
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .btn:hover {
            background-color: var(--primary);
            box-shadow: 0 0 15px rgba(74, 155, 215, 0.5);
        }
        
        .card-footer {
            border-top: 1px solid rgba(74, 155, 215, 0.3);
            padding-top: 20px;
            margin-top: 20px;
            display: flex;
            justify-content: flex-end;
        }
        
        /* App Selection Styles */
        .app-category {
            margin-bottom: 20px;
        }
        
        .app-category-title {
            color: var(--primary);
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .app-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .app-item {
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(74, 155, 215, 0.3);
            border-radius: 4px;
            padding: 8px 12px;
            color: var(--text-light);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .app-item:hover {
            background-color: rgba(74, 155, 215, 0.3);
        }
        
        .app-item.selected {
            background-color: var(--primary);
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(74, 155, 215, 0.5);
        }
        
        .selected-apps-title {
            color: var(--text-light);
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
            margin-top: 20px;
        }
        
        .selected-apps-container {
            min-height: 50px;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px dashed rgba(74, 155, 215, 0.3);
            border-radius: 4px;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .selected-app-item {
            background-color: var(--primary);
            color: var(--text-light);
            border-radius: 4px;
            padding: 5px 10px;
            font-size: 14px;
        }
        
        /* Admin Panel Styles */
        .admin-panel {
            background-color: rgba(10, 22, 34, 0.6);
            border: 1px solid rgba(74, 155, 215, 0.3);
            border-radius: 8px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .admin-panel h2 {
            color: var(--primary);
            font-size: 22px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(74, 155, 215, 0.3);
        }
        
        #load-all-profiles {
            background-color: rgba(74, 155, 215, 0.2);
            color: var(--text-light);
            border: 1px solid var(--primary);
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            margin-bottom: 20px;
        }
        
        #load-all-profiles:hover {
            background-color: var(--primary);
        }
        
        .profile-card {
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(74, 155, 215, 0.2);
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .profile-card h3 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .profile-card p {
            margin-bottom: 8px;
            font-size: 14px;
            color: var(--text-light);
        }
        
        .view-profile-btn {
            background-color: rgba(74, 155, 215, 0.2);
            color: var(--text-light);
            border: 1px solid var(--primary);
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .view-profile-btn:hover {
            background-color: var(--primary);
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            overflow: auto;
        }
        
        .modal-content {
            background-color: rgba(10, 22, 34, 0.95);
            margin: 10% auto;
            padding: 25px;
            border: 1px solid rgba(74, 155, 215, 0.3);
            border-radius: 8px;
            width: 80%;
            max-width: 700px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.5);
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .close {
            color: var(--text-muted);
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .close:hover {
            color: var(--primary);
        }
        
        .profile-details {
            margin: 20px 0;
        }
        
        .profile-details p {
            margin-bottom: 10px;
            color: var(--text-light);
        }
        
        .selected-apps-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }
        
        .app-tag {
            background-color: var(--primary);
            color: var(--text-light);
            border-radius: 4px;
            padding: 5px 10px;
            font-size: 14px;
        }
        
        /* Responsive Styles */
        @media (max-width: 768px) {
            .form-col {
                flex: 100%;
            }
            
            .login-container {
                width: 95%;
                padding: 20px 15px;
            }
            
            .login-logo {
                max-width: 250px;
            }
            
            .card {
                padding: 15px;
            }
            
            .btn, .login-btn {
                padding: 10px 15px;
            }
            
            .welcome-message h1 {
                font-size: 22px;
            }
            
            .welcome-message h2 {
                font-size: 18px;
            }
            
            .welcome-message p {
                font-size: 14px;
            }
            
            .modal-content {
                width: 95%;
                margin: 5% auto;
            }
        }
    </style>
    <script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body>
    <!-- Login Screen -->
    <div id="login-overlay" class="login-overlay">
        <div class="login-container">
            <div class="login-header">
                <img src="https://i.imgur.com/QSSR5V8.png" alt="Odin Sight Logo" class="login-logo">
                <h2>Tech Maturity Assessment</h2>
                <p>Please log in to access the assessment tool</p>
            </div>
            
            <div class="login-tabs">
                <div id="login-tab" class="login-tab active">Login</div>
                <div id="register-tab" class="login-tab">Register</div>
            </div>
            
            <div id="login-tab-content" class="tab-content active">
                <div class="login-form">
                    <div class="form-group">
                        <label for="login-email">Username:</label>
                        <input type="text" id="login-email" placeholder="Enter your username">
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password:</label>
                        <input type="password" id="login-password" placeholder="Enter your password">
                    </div>
                    <div id="login-error" class="login-error"></div>
                    <button id="login-btn" class="login-btn">Log In</button>
                </div>
            </div>
            
            <div id="register-tab-content" class="tab-content">
                <div class="login-form">
                    <div class="form-group">
                        <label for="register-name">Username:</label>
                        <input type="text" id="register-name" placeholder="Enter your username">
                    </div>
                    <div class="form-group">
                        <label for="register-password">Password:</label>
                        <input type="password" id="register-password" placeholder="Create a password">
                    </div>
                    <div class="form-group">
                        <label for="register-confirm-password">Confirm Password:</label>
                        <input type="password" id="register-confirm-password" placeholder="Confirm your password">
                    </div>
                    <div id="register-error" class="login-error"></div>
                    <button id="register-btn" class="login-btn">Register</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content (initially hidden) -->
    <div id="main-content" style="display: none;">
        <header>
            <div class="container">
                <div class="header-content">
                    <div class="welcome-message">
                        <h1>Welcome to the Tech Maturity Assessment by OdinSight</h1>
                        <h2>Provided by Odin Tech Forge</h2>
                        <p>Our intuitive and well-designed assessment quickly evaluates your organization's technology maturity. You'll receive a comprehensive Tech Maturity Score along with tailored recommendations to guide your next steps, while effectively identifying both risks and opportunities.</p>
                    </div>
                    <div class="user-controls">
                        <div class="user-info">
                            <div class="user-avatar">U</div>
                            <span id="user-name">User</span>
                        </div>
                        <button id="logout-button" class="logout-btn">Logout</button>
                    </div>
                </div>
            </div>
        </header>

        <div class="container assessment-container">
            <div class="card">
                <div class="card-header">
                    <h2>Company Profile</h2>
                </div>
                <form id="profile-form">
                    <div class="form-section">
                        <div class="form-section-title">Basic Information</div>
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="company-name">Company Name</label>
                                    <input type="text" id="company-name" class="form-control" required>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="team-size">Team Size</label>
                                    <select id="team-size" class="form-control" required>
                                        <option value="">Select team size</option>
                                        <option value="1-10">1-10 employees</option>
                                        <option value="11-50">11-50 employees</option>
                                        <option value="51-200">51-200 employees</option>
                                        <option value="200+">200+ employees</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <div class="form-section-title">Infrastructure & Security</div>
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="infrastructure">Infrastructure Type</label>
                                    <select id="infrastructure" class="form-control" required>
                                        <option value="">Select infrastructure type</option>
                                        <option value="On-premise">On-premise</option>
                                        <option value="Hybrid">Hybrid</option>
                                        <option value="Cloud-first (AWS, Azure, GCP)">Cloud-first (AWS, Azure, GCP)</option>
                                        <option value="Fully automated cloud-native">Fully automated cloud-native</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="disaster-recovery">Disaster Recovery</label>
                                    <select id="disaster-recovery" class="form-control" required>
                                        <option value="">Select disaster recovery level</option>
                                        <option value="No backups">No backups</option>
                                        <option value="Manual occasionally">Manual occasionally</option>
                                        <option value="Automated daily">Automated daily</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="security">Security Measures</label>
                                    <select id="security" class="form-control" required>
                                        <option value="">Select security level</option>
                                        <option value="None">None</option>
                                        <option value="Ad-hoc">Ad-hoc</option>
                                        <option value="Regular vulnerability scans">Regular vulnerability scans</option>
                                        <option value="Formal framework (ISO 27001, SOC2)">Formal framework (ISO 27001, SOC2)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="gdpr">GDPR Compliance</label>
                                    <select id="gdpr" class="form-control" required>
                                        <option value="">Select compliance level</option>
                                        <option value="None">None</option>
                                        <option value="In progress">In progress</option>
                                        <option value="Fully compliant with audits">Fully compliant with audits</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <div class="form-section-title">Development Practices</div>
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="deployment">Deployment Process</label>
                                    <select id="deployment" class="form-control" required>
                                        <option value="">Select deployment process</option>
                                        <option value="Manual">Manual</option>
                                        <option value="Basic CI/CD">Basic CI/CD</option>
                                        <option value="Automated CI/CD + testing">Automated CI/CD + testing</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="version-control">Version Control</label>
                                    <select id="version-control" class="form-control" required>
                                        <option value="">Select version control usage</option>
                                        <option value="No">No</option>
                                        <option value="Yes, but inconsistently">Yes, but inconsistently</option>
                                        <option value="Yes, fully standardized">Yes, fully standardized</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <div class="form-section-title">Leadership & Strategy</div>
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="cto">CTO/Technical Leadership</label>
                                    <select id="cto" class="form-control" required>
                                        <option value="">Select leadership structure</option>
                                        <option value="No dedicated tech leader">No dedicated tech leader</option>
                                        <option value="Part-time/fractional support">Part-time/fractional support</option>
                                        <option value="Dedicated CTO">Dedicated CTO</option>
                                        <option value="CTO + leadership team">CTO + leadership team</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="roadmap">Technical Roadmap</label>
                                    <select id="roadmap" class="form-control" required>
                                        <option value="">Select roadmap status</option>
                                        <option value="Never">Never</option>
                                        <option value="Once a year">Once a year</option>
                                        <option value="Quarterly">Quarterly</option>
                                        <option value="Continuous">Continuous</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <div class="form-section-title">AI Readiness</div>
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="ai-usage">Current AI Usage</label>
                                    <select id="ai-usage" class="form-control" required>
                                        <option value="">Select AI usage level</option>
                                        <option value="Not at all">Not at all</option>
                                        <option value="Experimenting in some departments">Experimenting in some departments</option>
                                        <option value="Integrated into workflows (e.g., analytics, automation)">Integrated into workflows (e.g., analytics, automation)</option>
                                        <option value="Core part of products/services">Core part of products/services</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="ai-strategy">AI Strategy</label>
                                    <select id="ai-strategy" class="form-control" required>
                                        <option value="">Select AI strategy status</option>
                                        <option value="No strategy/policy">No strategy/policy</option>
                                        <option value="Some guidelines, not standardized">Some guidelines, not standardized</option>
                                        <option value="Formal AI strategy in progress">Formal AI strategy in progress</option>
                                        <option value="Comprehensive AI strategy with governance">Comprehensive AI strategy with governance</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label for="ai-ethics">AI Ethics & Governance</label>
                                    <select id="ai-ethics" class="form-control" required>
                                        <option value="">Select AI ethics approach</option>
                                        <option value="Not considered">Not considered</option>
                                        <option value="Ad-hoc awareness">Ad-hoc awareness</option>
                                        <option value="Formal reviews & partial safeguards">Formal reviews & partial safeguards</option>
                                        <option value="Fully established AI governance framework">Fully established AI governance framework</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <div class="form-section-title">Technology Stack</div>
                        <div class="app-selection">
                            <div class="app-category">
                                <div class="app-category-title">Development Tools</div>
                                <div class="app-list">
                                    <div class="app-item" data-app-name="GitHub" data-app-category="Development">GitHub</div>
                                    <div class="app-item" data-app-name="GitLab" data-app-category="Development">GitLab</div>
                                    <div class="app-item" data-app-name="Bitbucket" data-app-category="Development">Bitbucket</div>
                                    <div class="app-item" data-app-name="VS Code" data-app-category="Development">VS Code</div>
                                    <div class="app-item" data-app-name="IntelliJ" data-app-category="Development">IntelliJ</div>
                                    <div class="app-item" data-app-name="Eclipse" data-app-category="Development">Eclipse</div>
                                </div>
                            </div>
                            <div class="app-category">
                                <div class="app-category-title">CI/CD</div>
                                <div class="app-list">
                                    <div class="app-item" data-app-name="Jenkins" data-app-category="CI/CD">Jenkins</div>
                                    <div class="app-item" data-app-name="CircleCI" data-app-category="CI/CD">CircleCI</div>
                                    <div class="app-item" data-app-name="Travis CI" data-app-category="CI/CD">Travis CI</div>
                                    <div class="app-item" data-app-name="GitHub Actions" data-app-category="CI/CD">GitHub Actions</div>
                                    <div class="app-item" data-app-name="GitLab CI" data-app-category="CI/CD">GitLab CI</div>
                                </div>
                            </div>
                            <div class="app-category">
                                <div class="app-category-title">Cloud Providers</div>
                                <div class="app-list">
                                    <div class="app-item" data-app-name="AWS" data-app-category="Cloud">AWS</div>
                                    <div class="app-item" data-app-name="Azure" data-app-category="Cloud">Azure</div>
                                    <div class="app-item" data-app-name="Google Cloud" data-app-category="Cloud">Google Cloud</div>
                                    <div class="app-item" data-app-name="DigitalOcean" data-app-category="Cloud">DigitalOcean</div>
                                    <div class="app-item" data-app-name="Heroku" data-app-category="Cloud">Heroku</div>
                                </div>
                            </div>
                            <div class="app-category">
                                <div class="app-category-title">Monitoring</div>
                                <div class="app-list">
                                    <div class="app-item" data-app-name="New Relic" data-app-category="Monitoring">New Relic</div>
                                    <div class="app-item" data-app-name="Datadog" data-app-category="Monitoring">Datadog</div>
                                    <div class="app-item" data-app-name="Prometheus" data-app-category="Monitoring">Prometheus</div>
                                    <div class="app-item" data-app-name="Grafana" data-app-category="Monitoring">Grafana</div>
                                    <div class="app-item" data-app-name="ELK Stack" data-app-category="Monitoring">ELK Stack</div>
                                </div>
                            </div>
                            <div class="app-category">
                                <div class="app-category-title">Databases</div>
                                <div class="app-list">
                                    <div class="app-item" data-app-name="MySQL" data-app-category="Database">MySQL</div>
                                    <div class="app-item" data-app-name="PostgreSQL" data-app-category="Database">PostgreSQL</div>
                                    <div class="app-item" data-app-name="MongoDB" data-app-category="Database">MongoDB</div>
                                    <div class="app-item" data-app-name="Redis" data-app-category="Database">Redis</div>
                                    <div class="app-item" data-app-name="SQL Server" data-app-category="Database">SQL Server</div>
                                    <div class="app-item" data-app-name="Oracle" data-app-category="Database">Oracle</div>
                                </div>
                            </div>
                        </div>
                        <div class="selected-apps">
                            <div class="selected-apps-title">Selected Technologies</div>
                            <div id="selected-apps" class="selected-apps-container"></div>
                        </div>
                    </div>

                    <div class="card-footer">
                        <button type="submit" class="btn">Save Profile</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Define API_URL once - this is the only place it should be defined
        const API_URL = 'https://odin-sight-backend.vercel.app/api';
        
        // Authentication Functions
        
        // Function to register a new user
        async function register(username, password) {
          try {
            console.log('Registering with:', { username, password });
            const response = await fetch(`${API_URL}/auth/register`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({ username, password })
            });
        
            const data = await response.json();
            
            if (!response.ok) {
              throw new Error(data.message || 'Registration failed');
            }
            
            return data;
          } catch (error) {
            console.error('Registration error:', error);
            throw error;
          }
        }
        
        // Function to login a user
        async function login(username, password) {
          try {
            console.log('Logging in with:', { username, password });
            const response = await fetch(`${API_URL}/auth/login`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({ username, password })
            });
        
            const data = await response.json();
            
            if (!response.ok) {
              throw new Error(data.message || 'Login failed');
            }
            
            // Store token and user data in localStorage
            localStorage.setItem('token', data.token);
            localStorage.setItem('user', JSON.stringify(data.user));
            
            return data;
          } catch (error) {
            console.error('Login error:', error);
            throw error;
          }
        }
        
        // Function to get current user information
        async function getCurrentUser() {
          try {
            const token = localStorage.getItem('token');
            
            if (!token) {
              throw new Error('No authentication token found');
            }
            
            const response = await fetch(`${API_URL}/auth/me`, {
              method: 'GET',
              headers: {
                'Authorization': `Bearer ${token}`
              }
            });
        
            const data = await response.json();
            
            if (!response.ok) {
              throw new Error(data.message || 'Failed to get user information');
            }
            
            // Update stored user data
            localStorage.setItem('user', JSON.stringify(data.user));
            
            return data.user;
          } catch (error) {
            console.error('Get user error:', error);
            throw error;
          }
        }
        
        // Company Profile Management
        
        // Function to save company profile
        async function saveCompanyProfile(profileData) {
          try {
            const token = localStorage.getItem('token');
            
            if (!token) {
              throw new Error('No authentication token found');
            }
            
            console.log('Saving profile data:', profileData);
            
            const response = await fetch(`${API_URL}/profile`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}`
              },
              body: JSON.stringify(profileData)
            });
        
            const data = await response.json();
            
            if (!response.ok) {
              console.error('Profile save error response:', data);
              throw new Error(data.message || 'Failed to save company profile');
            }
            
            // Store profile in localStorage for quick access
            localStorage.setItem('companyProfile', JSON.stringify(data.profile));
            
            return data.profile;
          } catch (error) {
            console.error('Save profile error:', error);
            throw error;
          }
        }
        
        // Function to get company profile
        async function getCompanyProfile() {
          try {
            // Check if we have it in localStorage first
            const cachedProfile = localStorage.getItem('companyProfile');
            if (cachedProfile) {
              return JSON.parse(cachedProfile);
            }
            
            const token = localStorage.getItem('token');
            
            if (!token) {
              throw new Error('No authentication token found');
            }
            
            const response = await fetch(`${API_URL}/profile`, {
              method: 'GET',
              headers: {
                'Authorization': `Bearer ${token}`
              }
            });
        
            const data = await response.json();
            
            if (!response.ok) {
              // If profile not found, return null instead of throwing error
              if (response.status === 404) {
                return null;
              }
              throw new Error(data.message || 'Failed to get company profile');
            }
            
            // Store profile in localStorage for quick access
            localStorage.setItem('companyProfile', JSON.stringify(data.profile));
            
            return data.profile;
          } catch (error) {
            console.error('Get profile error:', error);
            throw error;
          }
        }
        
        // Function to delete company profile
        async function deleteCompanyProfile() {
          try {
            const token = localStorage.getItem('token');
            
            if (!token) {
              throw new Error('No authentication token found');
            }
            
            const response = await fetch(`${API_URL}/profile`, {
              method: 'DELETE',
              headers: {
                'Authorization': `Bearer ${token}`
              }
            });
        
            const data = await response.json();
            
            if (!response.ok) {
              throw new Error(data.message || 'Failed to delete company profile');
            }
            
            // Remove profile from localStorage
            localStorage.removeItem('companyProfile');
            
            return true;
          } catch (error) {
            console.error('Delete profile error:', error);
            throw error;
          }
        }
        
        // Admin function to get all profiles
        async function getAllProfiles() {
          try {
            const token = localStorage.getItem('token');
            
            if (!token) {
              throw new Error('No authentication token found');
            }
            
            const response = await fetch(`${API_URL}/profile/all`, {
              method: 'GET',
              headers: {
                'Authorization': `Bearer ${token}`
              }
            });
        
            const data = await response.json();
            
            if (!response.ok) {
              throw new Error(data.message || 'Failed to get company profiles');
            }
            
            return data.profiles;
          } catch (error) {
            console.error('Get all profiles error:', error);
            throw error;
          }
        }
        
        // Function to prepare profile data from form
        function prepareProfileDataFromForm() {
          return {
            companyName: document.getElementById('company-name').value,
            teamSize: document.getElementById('team-size').value,
            infrastructure: document.getElementById('infrastructure').value,
            disasterRecovery: document.getElementById('disaster-recovery').value,
            security: document.getElementById('security').value,
            gdpr: document.getElementById('gdpr').value,
            deployment: document.getElementById('deployment').value,
            versionControl: document.getElementById('version-control').value,
            cto: document.getElementById('cto').value,
            roadmap: document.getElementById('roadmap').value,
            aiUsage: document.getElementById('ai-usage').value,
            aiStrategy: document.getElementById('ai-strategy').value,
            aiEthics: document.getElementById('ai-ethics').value,
            selectedApps: getSelectedApps()
          };
        }
        
        // Helper function to get selected apps from UI
        function getSelectedApps() {
          const selectedAppsContainer = document.getElementById('selected-apps');
          const selectedAppItems = selectedAppsContainer.querySelectorAll('.selected-app-item');
          
          const selectedApps = [];
          selectedAppItems.forEach(item => {
            const appName = item.getAttribute('data-app-name');
            const appCategory = item.getAttribute('data-app-category');
            
            if (appName && appCategory) {
              selectedApps.push({
                name: appName,
                category: appCategory
              });
            }
          });
          
          return selectedApps;
        }
        
        // Main Application Logic
        
        // Check if user is logged in
        function isLoggedIn() {
          return localStorage.getItem('token') !== null;
        }
        
        // Check if user is admin
        function isAdmin() {
          const user = JSON.parse(localStorage.getItem('user') || '{}');
          return user.role === 'admin';
        }
        
        // Show login screen
        function showLoginScreen() {
          document.getElementById('login-overlay').style.display = 'flex';
          document.getElementById('main-content').style.display = 'none';
        }
        
        // Show main content
        function showMainContent() {
          document.getElementById('login-overlay').style.display = 'none';
          document.getElementById('main-content').style.display = 'block';
        }
        
        // Setup logout handler
        function setupLogoutHandler() {
          document.getElementById('logout-button').addEventListener('click', function() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            localStorage.removeItem('companyProfile');
            window.location.reload();
          });
        }
        
        // Setup login handler
        function setupLoginHandler() {
          // Login form submission
          document.getElementById('login-btn').addEventListener('click', async function(e) {
            e.preventDefault();
            
            const username = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            try {
              await login(username, password);
              showMainContent();
              setupLogoutHandler();
              loadUserData();
            } catch (error) {
              document.getElementById('login-error').textContent = error.message;
            }
          });
          
          // Setup registration tab
          document.getElementById('register-tab').addEventListener('click', function() {
            document.getElementById('login-tab-content').style.display = 'none';
            document.getElementById('register-tab-content').style.display = 'block';
            document.getElementById('login-tab').classList.remove('active');
            document.getElementById('register-tab').classList.add('active');
          });
          
          // Setup login tab
          document.getElementById('login-tab').addEventListener('click', function() {
            document.getElementById('register-tab-content').style.display = 'none';
            document.getElementById('login-tab-content').style.display = 'block';
            document.getElementById('register-tab').classList.remove('active');
            document.getElementById('login-tab').classList.add('active');
          });
          
          // Setup registration form
          document.getElementById('register-btn').addEventListener('click', async function(e) {
            e.preventDefault();
            
            const username = document.getElementById('register-name').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            
            if (password !== confirmPassword) {
              document.getElementById('register-error').textContent = 'Passwords do not match';
              return;
            }
            
            try {
              await register(username, password);
              // Switch to login tab after successful registration
              document.getElementById('login-tab').click();
              document.getElementById('login-error').textContent = 'Registration successful! Please log in.';
              document.getElementById('login-error').style.color = '#1abc9c';
            } catch (error) {
              document.getElementById('register-error').textContent = error.message;
            }
          });
        }
        
        // Setup event handlers for the main application
        function setupEventHandlers() {
          // Setup profile form submission
          const profileForm = document.getElementById('profile-form');
          if (profileForm) {
            profileForm.addEventListener('submit', async function(e) {
              e.preventDefault();
              
              try {
                const profileData = prepareProfileDataFromForm();
                await saveCompanyProfile(profileData);
                alert('Profile saved successfully!');
              } catch (error) {
                alert('Failed to save profile: ' + error.message);
              }
            });
          }
          
          // Setup app selection
          const appItems = document.querySelectorAll('.app-item');
          appItems.forEach(item => {
            item.addEventListener('click', function() {
              this.classList.toggle('selected');
              updateSelectedApps();
            });
          });
        }
        
        // Update selected apps in the UI
        function updateSelectedApps() {
          const selectedAppsContainer = document.getElementById('selected-apps');
          selectedAppsContainer.innerHTML = '';
          
          const selectedAppItems = document.querySelectorAll('.app-item.selected');
          
          selectedAppItems.forEach(item => {
            const appName = item.getAttribute('data-app-name');
            const appCategory = item.getAttribute('data-app-category');
            
            const selectedAppElement = document.createElement('div');
            selectedAppElement.classList.add('selected-app-item');
            selectedAppElement.setAttribute('data-app-name', appName);
            selectedAppElement.setAttribute('data-app-category', appCategory);
            selectedAppElement.textContent = appName;
            
            selectedAppsContainer.appendChild(selectedAppElement);
          });
        }
        
        // Load user data
        async function loadUserData() {
          try {
            // Get user info
            const user = await getCurrentUser();
            
            // Display user name
            const userNameElement = document.getElementById('user-name');
            if (userNameElement) {
              userNameElement.textContent = user.username;
            }
            
            // Update user avatar with first letter of name
            const userAvatarElement = document.querySelector('.user-avatar');
            if (userAvatarElement && user.username) {
              userAvatarElement.textContent = user.username.charAt(0).toUpperCase();
            }
            
            // Get and display company profile if it exists
            try {
              const profile = await getCompanyProfile();
              
              // If profile exists, populate form fields
              if (profile) {
                console.log('User profile found - populating form fields');
                populateProfileForm(profile);
              } else {
                console.log('No user profile found');
              }
              
              // If user is admin, load additional admin features
              if (isAdmin()) {
                console.log('Admin user detected - loading admin features');
                loadAdminFeatures();
              }
            } catch (error) {
              console.error('Error loading profile:', error);
            }
          } catch (error) {
            console.error('Error loading user data:', error);
          }
        }
        
        // Populate profile form with data
        function populateProfileForm(profile) {
          document.getElementById('company-name').value = profile.companyName || '';
          document.getElementById('team-size').value = profile.teamSize || '';
          document.getElementById('infrastructure').value = profile.infrastructure || '';
          document.getElementById('disaster-recovery').value = profile.disasterRecovery || '';
          document.getElementById('security').value = profile.security || '';
          document.getElementById('gdpr').value = profile.gdpr || '';
          document.getElementById('deployment').value = profile.deployment || '';
          document.getElementById('version-control').value = profile.versionControl || '';
          document.getElementById('cto').value = profile.cto || '';
          document.getElementById('roadmap').value = profile.roadmap || '';
          document.getElementById('ai-usage').value = profile.aiUsage || '';
          document.getElementById('ai-strategy').value = profile.aiStrategy || '';
          document.getElementById('ai-ethics').value = profile.aiEthics || '';
          
          // Populate selected apps
          const selectedAppsContainer = document.getElementById('selected-apps');
          selectedAppsContainer.innerHTML = '';
          
          if (profile.selectedApps && Array.isArray(profile.selectedApps)) {
            profile.selectedApps.forEach(app => {
              const selectedAppElement = document.createElement('div');
              selectedAppElement.classList.add('selected-app-item');
              selectedAppElement.setAttribute('data-app-name', app.name);
              selectedAppElement.setAttribute('data-app-category', app.category);
              selectedAppElement.textContent = app.name;
              
              selectedAppsContainer.appendChild(selectedAppElement);
              
              // Also mark the corresponding app item as selected
              const appItem = document.querySelector(`.app-item[data-app-name="${app.name}"]`);
              if (appItem) {
                appItem.classList.add('selected');
              }
            });
          }
        }
        
        // Load admin features
        function loadAdminFeatures() {
          // Create admin panel
          const adminPanel = document.createElement('div');
          adminPanel.id = 'admin-panel';
          adminPanel.className = 'admin-panel';
          adminPanel.innerHTML = `
            <h2>Admin Panel</h2>
            <button id="load-all-profiles">Load All Profiles</button>
            <div id="all-profiles-container"></div>
          `;
          
          // Add admin panel to the page
          document.querySelector('.container.assessment-container').appendChild(adminPanel);
          
          // Setup event handler for loading all profiles
          document.getElementById('load-all-profiles').addEventListener('click', async function() {
            try {
              const profiles = await getAllProfiles();
              displayAllProfiles(profiles);
            } catch (error) {
              alert('Failed to load profiles: ' + error.message);
            }
          });
        }
        
        // Display all profiles in the admin panel
        function displayAllProfiles(profiles) {
          const container = document.getElementById('all-profiles-container');
          container.innerHTML = '';
          
          if (!profiles || profiles.length === 0) {
            container.innerHTML = '<p>No profiles found</p>';
            return;
          }
          
          profiles.forEach(profile => {
            const profileElement = document.createElement('div');
            profileElement.className = 'profile-card';
            profileElement.innerHTML = `
              <h3>${profile.companyName || 'Unnamed Company'}</h3>
              <p><strong>Team Size:</strong> ${profile.teamSize || 'N/A'}</p>
              <p><strong>User:</strong> ${profile.user.username || 'Unknown'}</p>
              <button class="view-profile-btn" data-profile-id="${profile._id}">View Details</button>
            `;
            
            container.appendChild(profileElement);
          });
          
          // Setup event handlers for view buttons
          document.querySelectorAll('.view-profile-btn').forEach(button => {
            button.addEventListener('click', function() {
              const profileId = this.getAttribute('data-profile-id');
              const profile = profiles.find(p => p._id === profileId);
              
              if (profile) {
                displayProfileDetails(profile);
              }
            });
          });
        }
        
        // Display detailed profile information
        function displayProfileDetails(profile) {
          // Create modal for profile details
          const modal = document.createElement('div');
          modal.className = 'modal';
          modal.innerHTML = `
            <div class="modal-content">
              <span class="close">&times;</span>
              <h2>${profile.companyName || 'Unnamed Company'}</h2>
              <div class="profile-details">
                <p><strong>Team Size:</strong> ${profile.teamSize || 'N/A'}</p>
                <p><strong>Infrastructure:</strong> ${profile.infrastructure || 'N/A'}</p>
                <p><strong>Disaster Recovery:</strong> ${profile.disasterRecovery || 'N/A'}</p>
                <p><strong>Security:</strong> ${profile.security || 'N/A'}</p>
                <p><strong>GDPR:</strong> ${profile.gdpr || 'N/A'}</p>
                <p><strong>Deployment:</strong> ${profile.deployment || 'N/A'}</p>
                <p><strong>Version Control:</strong> ${profile.versionControl || 'N/A'}</p>
                <p><strong>CTO:</strong> ${profile.cto || 'N/A'}</p>
                <p><strong>Roadmap:</strong> ${profile.roadmap || 'N/A'}</p>
                <p><strong>AI Usage:</strong> ${profile.aiUsage || 'N/A'}</p>
                <p><strong>AI Strategy:</strong> ${profile.aiStrategy || 'N/A'}</p>
                <p><strong>AI Ethics:</strong> ${profile.aiEthics || 'N/A'}</p>
              </div>
              <h3>Selected Apps</h3>
              <div class="selected-apps-list">
                ${profile.selectedApps && profile.selectedApps.length > 0 
                  ? profile.selectedApps.map(app => `<div class="app-tag">${app.name}</div>`).join('') 
                  : '<p>No apps selected</p>'}
              </div>
            </div>
          `;
          
          // Add modal to the page
          document.body.appendChild(modal);
          
          // Show modal
          modal.style.display = 'block';
          
          // Setup close button
          modal.querySelector('.close').addEventListener('click', function() {
            modal.style.display = 'none';
            setTimeout(() => {
              modal.remove();
            }, 300);
          });
          
          // Close modal when clicking outside
          window.addEventListener('click', function(event) {
            if (event.target === modal) {
              modal.style.display = 'none';
              setTimeout(() => {
                modal.remove();
              }, 300);
            }
          });
        }
        
        // Wait for DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
          console.log('DOM fully loaded - initializing application');
          
          // Check if user is already logged in
          if (isLoggedIn()) {
            console.log('User is logged in - showing main content');
            showMainContent();
            setupLogoutHandler();
            loadUserData();
          } else {
            console.log('User is not logged in - showing login screen');
            showLoginScreen();
            setupLoginHandler();
          }
          
          // Set up event handlers for the main application
          setupEventHandlers();
        });
    </script>
</body>
</html>
